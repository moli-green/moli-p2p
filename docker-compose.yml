services:
  server:
    build: ./server
    container_name: moli-server
    restart: always
    ports:
      - "9090:9090"
    environment:
      - RUST_LOG=info
      # SECURITY: You MUST set TURN_SECRET in your .env file or environment.
      # Do NOT use a default value here to prevent insecure production deployments.
      - TURN_SECRET=${TURN_SECRET:?error: TURN_SECRET environment variable is required. Please create a .env file with a strong secret.}

  client:
    build: ./client
    container_name: moli-client
    restart: always
    ports:
      - "80:80"
    depends_on:
      - server
